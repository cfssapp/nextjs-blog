"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getPaths = void 0;
const utils_1 = require("@umijs/utils");
const fs_1 = require("fs");
const path_1 = require("path");
const types_1 = require("../types");
function winJoin(...args) {
    return (0, utils_1.winPath)((0, path_1.join)(...args));
}
function getPaths(opts) {
    const cwd = opts.cwd;
    const src = winJoin(cwd, 'src');
    const absSrcPath = (0, fs_1.existsSync)(src) && (0, fs_1.statSync)(src).isDirectory() ? src : cwd;
    const absPagesPath = winJoin(absSrcPath, 'pages');
    const absApiRoutesPath = winJoin(absSrcPath, 'api');
    const tmp = opts.env === types_1.Env.development
        ? `.${opts.prefix}`
        : `.${opts.prefix}-${opts.env}`;
    const absTmpPath = winJoin(absSrcPath, tmp);
    const absNodeModulesPath = winJoin(cwd, 'node_modules');
    const absOutputPath = winJoin(cwd, 'dist');
    return {
        cwd,
        absSrcPath,
        absPagesPath,
        absApiRoutesPath,
        absTmpPath,
        absNodeModulesPath,
        absOutputPath,
    };
}
exports.getPaths = getPaths;
