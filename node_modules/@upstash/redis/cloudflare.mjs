import {
  Redis
} from "./chunk-2EIGUPGW.mjs";
import "./chunk-HGM7M7CJ.mjs";
import {
  HttpClient
} from "./chunk-HIDCSH5S.mjs";
import "./chunk-7YUZYRJS.mjs";

// pkg/cloudflare.ts
var Redis2 = class extends Redis {
  constructor(config) {
    const client = new HttpClient({
      baseUrl: config.url,
      headers: {
        authorization: `Bearer ${config.token}`
      }
    });
    super(client);
  }
  static fromEnv() {
    const url = UPSTASH_REDIS_REST_URL;
    const token = UPSTASH_REDIS_REST_TOKEN;
    if (!url) {
      throw new Error("Unable to find environment variable: `UPSTASH_REDIS_REST_URL`. Please add it via `wrangler secret put UPSTASH_REDIS_REST_URL`");
    }
    if (!token) {
      throw new Error("Unable to find environment variable: `UPSTASH_REDIS_REST_TOKEN`. Please add it via `wrangler secret put UPSTASH_REDIS_REST_TOKEN`");
    }
    return new Redis2({ url, token });
  }
};
export {
  Redis2 as Redis
};
